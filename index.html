<!doctype html>
<html>
<body>
<textarea id="q"></textarea>
<button onclick="send()">送信</button>
<pre id="out"></pre>

<script>
async function send() {
  const q = document.getElementById("q").value;
  const out = document.getElementById("out");

  try {
    const res = await fetch(
      "https://phuseqexdczcdwhfskqt.supabase.co/functions/v1/ask",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: q }),
      }
    );

    const json = await res.json();
    out.textContent = JSON.stringify(json, null, 2);
  } catch (e) {
    out.textContent = "通信エラー: " + e;
  }
}
</script>
</body>
</html>
